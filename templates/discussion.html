{% extends 'base.html' %}

{% block content %}
<h2>{{ post.title }} - Discussion</h2>
<p>{{ post.content }}</p>

<h3>Comments</h3>
<ul>
    {% for comment in post.comments %}
    <li>
        <strong>{{ comment.name }}:</strong> {{ comment.text }}
        <form method="POST" action="{{ url_for('delete_comment', post_id=post.id, comment_index=loop.index0) }}" style="display:inline;">
            <input type="submit" value="Delete Comment" onclick="return confirm('Are you sure you want to delete this comment?');">
        </form>
    </li>
    {% endfor %}
</ul>

<h3>Add a Comment</h3>
<form method="POST">
    <label for="name">Your Name:</label>
    <input type="text" id="name" name="name" required><br><br>
    <textarea name="comment" rows="4" required></textarea><br><br>
    <input type="submit" value="Submit">
</form>

<a href="{{ url_for('post', post_id=post.id) }}" class="button">Back to Post</a>
<a href="{{ url_for('index') }}" class="button">Back to Posts</a>
{% endblock %}
